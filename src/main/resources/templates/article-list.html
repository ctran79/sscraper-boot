<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header"></head>
<body>
<div th:replace="fragments/menu::top-menu"></div>
<div class="container pt-2">
    <div class="form-inline">
        <div class="px-2">Please choose topic:</div>
        <div class="px-2 form-group ">
            <select id="select-topic" class="form-control">
                <option th:each="item : ${topics}" th:selected="${#strings.equals(param.topic, item.id)}" th:text="${item.name}" th:value="${item.id}"></option>
             </select>
        </div>
        <div class="px-2">
            <button class="btn btn-primary" id="show-articles-list-btn">Show</button>
        </div>
    </div>

    <ul class="list-group pt-2" th:if="${not #lists.isEmpty(articlesList)}">
        <li class="list-group-item" th:each="item : ${articlesList}">
            <a th:href="${item.link}" th:text="${item.title}" target="_blank" rel="noopener noreferrer"></a>
        </li>
    </ul>
</div>
<div th:replace="fragments/footer::footer-scripts"></div>
<script th:inline="javascript">
    /*<![CDATA[*/
    let parserCode = /*[[${parserCode}]]*/ '';
    $(function () {
        $("#show-articles-list-btn").on("click", function (e) {
            e.preventDefault();
            let topicId = parseInt($("select[id=select-topic]").val());
            window.location.href = `/parsers/${parserCode}?topic=${topicId}`;
         });
    });
    /*]]>*/
</script>
</body>
</html>